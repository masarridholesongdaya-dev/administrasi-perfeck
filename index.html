<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Administrasi Sekolah</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Plus Jakarta Sans', sans-serif; }
    .sidebar-item { transition: all 0.2s ease; }
    .sidebar-item:hover { transform: translateX(4px); }
    .card-hover { transition: all 0.3s ease; }
    .card-hover:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
    .fade-in { animation: fadeIn 0.3s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .btn-loading { pointer-events: none; opacity: 0.7; }
    input:focus, select:focus, textarea:focus { outline: none; ring: 2px; }
  </style>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body class="h-full bg-slate-100">
  <div id="app" class="h-full w-full overflow-auto">
   <!-- Login Page -->
   <div id="loginPage" class="h-full w-full flex items-center justify-center bg-gradient-to-br from-emerald-600 via-teal-600 to-cyan-700">
    <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md mx-4 fade-in">
     <div class="text-center mb-8">
      <div class="w-20 h-20 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg">
       <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
       </svg>
      </div>
      <h1 id="loginSchoolName" class="text-2xl font-bold text-slate-800">MIS DARUL HIKMAH BINDANG</h1>
      <p id="loginWelcomeText" class="text-slate-500 mt-2">Sistem Administrasi Sekolah</p>
     </div>
     <form id="loginForm" class="space-y-5">
      <div>
       <label for="username" class="block text-sm font-medium text-slate-700 mb-2">Username</label> <input type="text" id="username" class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition" placeholder="Masukkan username">
      </div>
      <div>
       <label for="password" class="block text-sm font-medium text-slate-700 mb-2">Password</label> <input type="password" id="password" class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition" placeholder="Masukkan password">
      </div>
      <p id="loginError" class="text-red-500 text-sm hidden">Username atau password salah!</p><button type="submit" class="w-full bg-gradient-to-r from-emerald-500 to-teal-600 text-white py-3 rounded-xl font-semibold hover:from-emerald-600 hover:to-teal-700 transition shadow-lg"> Masuk </button>
     </form>
    </div>
   </div><!-- Main Dashboard -->
   <div id="dashboard" class="h-full w-full hidden">
    <div class="flex h-full">
     <!-- Sidebar -->
     <aside class="w-64 bg-gradient-to-b from-slate-800 to-slate-900 text-white flex-shrink-0 flex flex-col">
      <div class="p-5 border-b border-slate-700">
       <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center">
         <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
         </svg>
        </div>
        <div>
         <h2 id="sidebarSchoolName" class="font-bold text-sm">MIS DARUL HIKMAH</h2>
         <p class="text-xs text-slate-400">Admin Panel</p>
        </div>
       </div>
      </div>
      <nav class="flex-1 p-4 space-y-2">
       <button onclick="showSection('beranda')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-emerald-600 text-white" data-section="beranda">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
        </svg><span>Beranda</span> </button> <button onclick="showSection('siswa')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-700 text-slate-300" data-section="siswa">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
        </svg><span>Data Siswa</span> </button> <button onclick="showSection('guru')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-700 text-slate-300" data-section="guru">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
        </svg><span>Data Guru</span> </button> <button onclick="showSection('prestasi')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-700 text-slate-300" data-section="prestasi">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m0 0h6m0-6l-1.414-1.414a2 2 0 00-2.828 0L12 8m0 0L8.586 4.586a2 2 0 00-2.828 0L4 6m8 8l-3.414-3.414a2 2 0 00-2.828 0L4 14m0 0v2a2 2 0 002 2h12a2 2 0 002-2v-2m0 0l1.414 1.414a2 2 0 01-2.828 2.828L12 16"></path>
        </svg><span>Prestasi Siswa</span> </button> <button onclick="showSection('jurnal')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-700 text-slate-300" data-section="jurnal">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg><span>Jurnal Mengajar</span> </button> <button onclick="showSection('jadwal')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-700 text-slate-300" data-section="jadwal">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
        </svg><span>Jadwal Pelajaran</span> </button> <button onclick="showSection('dokumentasi')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-700 text-slate-300" data-section="dokumentasi">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg><span>Dokumentasi</span> </button>
      </nav>
      <div class="p-4 border-t border-slate-700">
       <button onclick="logout()" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-red-600/20 text-red-400 transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
        </svg><span>Keluar</span> </button>
      </div>
     </aside><!-- Main Content -->
     <main class="flex-1 overflow-auto bg-slate-100">
      <!-- Beranda Section -->
      <section id="sectionBeranda" class="p-6 fade-in">
       <div class="mb-6">
        <h1 class="text-2xl font-bold text-slate-800">Selamat Datang, Admin!</h1>
        <p class="text-slate-500">Dashboard Administrasi Sekolah</p>
       </div>
       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-5 mb-8">
        <div class="card-hover bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-5 text-white shadow-lg">
         <div class="flex items-center justify-between">
          <div>
           <p class="text-blue-100 text-sm">Total Siswa</p>
           <p id="totalSiswa" class="text-3xl font-bold mt-1">0</p>
          </div>
          <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
           <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
           </svg>
          </div>
         </div>
        </div>
        <div class="card-hover bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-5 text-white shadow-lg">
         <div class="flex items-center justify-between">
          <div>
           <p class="text-emerald-100 text-sm">Total Guru</p>
           <p id="totalGuru" class="text-3xl font-bold mt-1">0</p>
          </div>
          <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
           <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
           </svg>
          </div>
         </div>
        </div>
        <div class="card-hover bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl p-5 text-white shadow-lg">
         <div class="flex items-center justify-between">
          <div>
           <p class="text-amber-100 text-sm">Total Prestasi</p>
           <p id="totalPrestasi" class="text-3xl font-bold mt-1">0</p>
          </div>
          <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
           <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m0 0h6"></path>
           </svg>
          </div>
         </div>
        </div>
        <div class="card-hover bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-5 text-white shadow-lg">
         <div class="flex items-center justify-between">
          <div>
           <p class="text-purple-100 text-sm">Jadwal Aktif</p>
           <p id="totalJadwal" class="text-3xl font-bold mt-1">0</p>
          </div>
          <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
           <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
           </svg>
          </div>
         </div>
        </div>
        <div class="card-hover bg-gradient-to-br from-pink-500 to-rose-500 rounded-2xl p-5 text-white shadow-lg">
         <div class="flex items-center justify-between">
          <div>
           <p class="text-pink-100 text-sm">Total Dokumen</p>
           <p id="totalDokumen" class="text-3xl font-bold mt-1">0</p>
          </div>
          <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
           <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
           </svg>
          </div>
         </div>
        </div>
       </div>
       <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div class="bg-white rounded-2xl p-6 shadow-sm">
         <h3 class="font-bold text-slate-800 mb-4">Aktivitas Terbaru</h3>
         <div id="recentActivity" class="space-y-3">
          <p class="text-slate-400 text-sm">Belum ada aktivitas</p>
         </div>
        </div>
        <div class="bg-white rounded-2xl p-6 shadow-sm">
         <h3 class="font-bold text-slate-800 mb-4">Jadwal Hari Ini</h3>
         <div id="todaySchedule" class="space-y-3">
          <p class="text-slate-400 text-sm">Tidak ada jadwal</p>
         </div>
        </div>
       </div>
      </section><!-- Data Siswa Section -->
      <section id="sectionSiswa" class="p-6 hidden fade-in">
       <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
        <div>
         <h1 class="text-2xl font-bold text-slate-800">Data Siswa</h1>
         <p class="text-slate-500">Kelola data siswa sekolah</p>
        </div><button onclick="openModal('siswa')" class="inline-flex items-center gap-2 bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 transition shadow-lg">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
         </svg> Tambah Siswa </button>
       </div>
       <div class="bg-white rounded-2xl shadow-sm overflow-hidden">
        <div class="overflow-x-auto">
         <table class="w-full">
          <thead class="bg-slate-50">
           <tr>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">NIS</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Nama</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Kelas</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Alamat</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Telepon</th>
            <th class="px-6 py-4 text-center text-xs font-semibold text-slate-600 uppercase">Aksi</th>
           </tr>
          </thead>
          <tbody id="siswaTableBody" class="divide-y divide-slate-100">
           <tr>
            <td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada data siswa</td>
           </tr>
          </tbody>
         </table>
        </div>
       </div>
      </section><!-- Data Guru Section -->
      <section id="sectionGuru" class="p-6 hidden fade-in">
       <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
        <div>
         <h1 class="text-2xl font-bold text-slate-800">Data Guru</h1>
         <p class="text-slate-500">Kelola data guru sekolah</p>
        </div><button onclick="openModal('guru')" class="inline-flex items-center gap-2 bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 transition shadow-lg">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
         </svg> Tambah Guru </button>
       </div>
       <div class="bg-white rounded-2xl shadow-sm overflow-hidden">
        <div class="overflow-x-auto">
         <table class="w-full">
          <thead class="bg-slate-50">
           <tr>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">NIP</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Nama</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Mata Pelajaran</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Telepon</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Alamat</th>
            <th class="px-6 py-4 text-center text-xs font-semibold text-slate-600 uppercase">Aksi</th>
           </tr>
          </thead>
          <tbody id="guruTableBody" class="divide-y divide-slate-100">
           <tr>
            <td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada data guru</td>
           </tr>
          </tbody>
         </table>
        </div>
       </div>
      </section><!-- Prestasi Siswa Section -->
      <section id="sectionPrestasi" class="p-6 hidden fade-in">
       <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
        <div>
         <h1 class="text-2xl font-bold text-slate-800">Prestasi Siswa</h1>
         <p class="text-slate-500">Kelola pencapaian dan penghargaan siswa</p>
        </div><button onclick="openModal('prestasi')" class="inline-flex items-center gap-2 bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 transition shadow-lg">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
         </svg> Tambah Prestasi </button>
       </div>
       <div class="bg-white rounded-2xl shadow-sm overflow-hidden">
        <div class="overflow-x-auto">
         <table class="w-full">
          <thead class="bg-slate-50">
           <tr>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">NIS</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Nama Siswa</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Nama Prestasi</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Tingkat</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Penghargaan</th>
            <th class="px-6 py-4 text-center text-xs font-semibold text-slate-600 uppercase">Aksi</th>
           </tr>
          </thead>
          <tbody id="prestasiTableBody" class="divide-y divide-slate-100">
           <tr>
            <td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada prestasi siswa</td>
           </tr>
          </tbody>
         </table>
        </div>
       </div>
      </section><!-- Jurnal Mengajar Section -->
      <section id="sectionJurnal" class="p-6 hidden fade-in">
       <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
        <div>
         <h1 class="text-2xl font-bold text-slate-800">Jurnal Mengajar</h1>
         <p class="text-slate-500">Catatan kegiatan mengajar guru</p>
        </div><button onclick="openModal('jurnal')" class="inline-flex items-center gap-2 bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 transition shadow-lg">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
         </svg> Tambah Jurnal </button>
       </div>
       <div class="bg-white rounded-2xl shadow-sm overflow-hidden">
        <div class="overflow-x-auto">
         <table class="w-full">
          <thead class="bg-slate-50">
           <tr>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Tanggal</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Guru</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Kelas</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Mata Pelajaran</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Materi</th>
            <th class="px-6 py-4 text-center text-xs font-semibold text-slate-600 uppercase">Aksi</th>
           </tr>
          </thead>
          <tbody id="jurnalTableBody" class="divide-y divide-slate-100">
           <tr>
            <td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada jurnal mengajar</td>
           </tr>
          </tbody>
         </table>
        </div>
       </div>
      </section><!-- Jadwal Pelajaran Section -->
      <section id="sectionJadwal" class="p-6 hidden fade-in">
       <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
        <div>
         <h1 class="text-2xl font-bold text-slate-800">Jadwal Pelajaran</h1>
         <p class="text-slate-500">Kelola jadwal pelajaran sekolah</p>
        </div><button onclick="openModal('jadwal')" class="inline-flex items-center gap-2 bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 transition shadow-lg">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
         </svg> Tambah Jadwal </button>
       </div>
       <div class="bg-white rounded-2xl shadow-sm overflow-hidden">
        <div class="overflow-x-auto">
         <table class="w-full">
          <thead class="bg-slate-50">
           <tr>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Hari</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Jam</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Kelas</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Mata Pelajaran</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Guru</th>
            <th class="px-6 py-4 text-center text-xs font-semibold text-slate-600 uppercase">Aksi</th>
           </tr>
          </thead>
          <tbody id="jadwalTableBody" class="divide-y divide-slate-100">
           <tr>
            <td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada jadwal pelajaran</td>
           </tr>
          </tbody>
         </table>
        </div>
       </div>
      </section><!-- Dokumentasi Section -->
      <section id="sectionDokumentasi" class="p-6 hidden fade-in">
       <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
        <div>
         <h1 class="text-2xl font-bold text-slate-800">Data Dokumentasi Sekolah</h1>
         <p class="text-slate-500">Kelola file dan dokumen penting sekolah</p>
        </div><button onclick="openModal('dokumentasi')" class="inline-flex items-center gap-2 bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 transition shadow-lg">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
         </svg> Tambah Dokumen </button>
       </div>
       <div class="bg-white rounded-2xl shadow-sm overflow-hidden">
        <div class="overflow-x-auto">
         <table class="w-full">
          <thead class="bg-slate-50">
           <tr>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Nama Dokumen</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Kategori</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Jenis</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Tahun</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase">Deskripsi</th>
            <th class="px-6 py-4 text-center text-xs font-semibold text-slate-600 uppercase">Aksi</th>
           </tr>
          </thead>
          <tbody id="dokumentasiTableBody" class="divide-y divide-slate-100">
           <tr>
            <td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada dokumen</td>
           </tr>
          </tbody>
         </table>
        </div>
       </div>
      </section>
     </main>
    </div>
   </div><!-- Modal Overlay -->
   <div id="modalOverlay" class="fixed inset-0 bg-black/50 hidden z-50 flex items-center justify-center p-4">
    <!-- Modal Siswa -->
    <div id="modalSiswa" class="bg-white rounded-2xl w-full max-w-lg max-h-[90%] overflow-auto hidden">
     <div class="p-6 border-b border-slate-200">
      <h3 class="text-xl font-bold text-slate-800">Tambah Data Siswa</h3>
     </div>
     <form id="formSiswa" class="p-6 space-y-4">
      <input type="hidden" id="siswaId">
      <div>
       <label for="siswaNis" class="block text-sm font-medium text-slate-700 mb-1">NIS</label> <input type="text" id="siswaNis" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required>
      </div>
      <div>
       <label for="siswaNama" class="block text-sm font-medium text-slate-700 mb-1">Nama Lengkap</label> <input type="text" id="siswaNama" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required>
      </div>
      <div>
       <label for="siswaKelas" class="block text-sm font-medium text-slate-700 mb-1">Kelas</label> <select id="siswaKelas" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Kelas</option> <option value="X-A">X-A</option> <option value="X-B">X-B</option> <option value="XI-A">XI-A</option> <option value="XI-B">XI-B</option> <option value="XII-A">XII-A</option> <option value="XII-B">XII-B</option> </select>
      </div>
      <div>
       <label for="siswaAlamat" class="block text-sm font-medium text-slate-700 mb-1">Alamat</label> <textarea id="siswaAlamat" rows="2" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500"></textarea>
      </div>
      <div>
       <label for="siswaTelepon" class="block text-sm font-medium text-slate-700 mb-1">No. Telepon</label> <input type="tel" id="siswaTelepon" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500">
      </div>
      <div class="flex gap-3 pt-4">
       <button type="button" onclick="closeModal()" class="flex-1 px-4 py-2.5 border border-slate-300 rounded-xl text-slate-700 hover:bg-slate-50 transition">Batal</button> <button type="submit" id="btnSaveSiswa" class="flex-1 px-4 py-2.5 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition">Simpan</button>
      </div>
     </form>
    </div><!-- Modal Guru -->
    <div id="modalGuru" class="bg-white rounded-2xl w-full max-w-lg max-h-[90%] overflow-auto hidden">
     <div class="p-6 border-b border-slate-200">
      <h3 class="text-xl font-bold text-slate-800">Tambah Data Guru</h3>
     </div>
     <form id="formGuru" class="p-6 space-y-4">
      <input type="hidden" id="guruId">
      <div>
       <label for="guruNip" class="block text-sm font-medium text-slate-700 mb-1">NIP</label> <input type="text" id="guruNip" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required>
      </div>
      <div>
       <label for="guruNama" class="block text-sm font-medium text-slate-700 mb-1">Nama Lengkap</label> <input type="text" id="guruNama" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required>
      </div>
      <div>
       <label for="guruMapel" class="block text-sm font-medium text-slate-700 mb-1">Mata Pelajaran</label> <select id="guruMapel" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Mata Pelajaran</option> <option value="Matematika">Matematika</option> <option value="Bahasa Indonesia">Bahasa Indonesia</option> <option value="Bahasa Inggris">Bahasa Inggris</option> <option value="Fisika">Fisika</option> <option value="Kimia">Kimia</option> <option value="Biologi">Biologi</option> <option value="Sejarah">Sejarah</option> <option value="Geografi">Geografi</option> <option value="Ekonomi">Ekonomi</option> <option value="PKN">PKN</option> <option value="Penjaskes">Penjaskes</option> <option value="Seni Budaya">Seni Budaya</option> </select>
      </div>
      <div>
       <label for="guruTelepon" class="block text-sm font-medium text-slate-700 mb-1">No. Telepon</label> <input type="tel" id="guruTelepon" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500">
      </div>
      <div>
       <label for="guruAlamat" class="block text-sm font-medium text-slate-700 mb-1">Alamat</label> <textarea id="guruAlamat" rows="2" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500"></textarea>
      </div>
      <div class="flex gap-3 pt-4">
       <button type="button" onclick="closeModal()" class="flex-1 px-4 py-2.5 border border-slate-300 rounded-xl text-slate-700 hover:bg-slate-50 transition">Batal</button> <button type="submit" id="btnSaveGuru" class="flex-1 px-4 py-2.5 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition">Simpan</button>
      </div>
     </form>
    </div><!-- Modal Prestasi -->
    <div id="modalPrestasi" class="bg-white rounded-2xl w-full max-w-lg max-h-[90%] overflow-auto hidden">
     <div class="p-6 border-b border-slate-200">
      <h3 class="text-xl font-bold text-slate-800">Tambah Prestasi Siswa</h3>
     </div>
     <form id="formPrestasi" class="p-6 space-y-4">
      <input type="hidden" id="prestasiId">
      <div>
       <label for="prestasiNis" class="block text-sm font-medium text-slate-700 mb-1">NIS Siswa</label> <select id="prestasiNis" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Siswa</option> </select>
      </div>
      <div>
       <label for="prestasiNamaPrestasi" class="block text-sm font-medium text-slate-700 mb-1">Nama Prestasi</label> <input type="text" id="prestasiNamaPrestasi" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" placeholder="cth: Juara Lomba MTQ" required>
      </div>
      <div>
       <label for="prestasiTingkat" class="block text-sm font-medium text-slate-700 mb-1">Tingkat</label> <select id="prestasiTingkat" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Tingkat</option> <option value="Kelas">Kelas</option> <option value="Sekolah">Sekolah</option> <option value="Kecamatan">Kecamatan</option> <option value="Kabupaten">Kabupaten</option> <option value="Provinsi">Provinsi</option> <option value="Nasional">Nasional</option> <option value="Internasional">Internasional</option> </select>
      </div>
      <div>
       <label for="prestasiPenghargaan" class="block text-sm font-medium text-slate-700 mb-1">Penghargaan</label> <select id="prestasiPenghargaan" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Penghargaan</option> <option value="Juara 1">Juara 1</option> <option value="Juara 2">Juara 2</option> <option value="Juara 3">Juara 3</option> <option value="Finalis">Finalis</option> <option value="Peserta">Peserta</option> <option value="Sertifikat">Sertifikat</option> </select>
      </div>
      <div class="flex gap-3 pt-4">
       <button type="button" onclick="closeModal()" class="flex-1 px-4 py-2.5 border border-slate-300 rounded-xl text-slate-700 hover:bg-slate-50 transition">Batal</button> <button type="submit" id="btnSavePrestasi" class="flex-1 px-4 py-2.5 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition">Simpan</button>
      </div>
     </form>
    </div><!-- Modal Jurnal -->
    <div id="modalJurnal" class="bg-white rounded-2xl w-full max-w-lg max-h-[90%] overflow-auto hidden">
     <div class="p-6 border-b border-slate-200">
      <h3 class="text-xl font-bold text-slate-800">Tambah Jurnal Mengajar</h3>
     </div>
     <form id="formJurnal" class="p-6 space-y-4">
      <input type="hidden" id="jurnalId">
      <div>
       <label for="jurnalTanggal" class="block text-sm font-medium text-slate-700 mb-1">Tanggal</label> <input type="date" id="jurnalTanggal" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required>
      </div>
      <div>
       <label for="jurnalGuru" class="block text-sm font-medium text-slate-700 mb-1">Guru</label> <select id="jurnalGuru" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Guru</option> </select>
      </div>
      <div>
       <label for="jurnalKelas" class="block text-sm font-medium text-slate-700 mb-1">Kelas</label> <select id="jurnalKelas" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Kelas</option> <option value="X-A">X-A</option> <option value="X-B">X-B</option> <option value="XI-A">XI-A</option> <option value="XI-B">XI-B</option> <option value="XII-A">XII-A</option> <option value="XII-B">XII-B</option> </select>
      </div>
      <div>
       <label for="jurnalMapel" class="block text-sm font-medium text-slate-700 mb-1">Mata Pelajaran</label> <input type="text" id="jurnalMapel" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required>
      </div>
      <div>
       <label for="jurnalMateri" class="block text-sm font-medium text-slate-700 mb-1">Materi</label> <textarea id="jurnalMateri" rows="3" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required></textarea>
      </div>
      <div>
       <label for="jurnalKeterangan" class="block text-sm font-medium text-slate-700 mb-1">Keterangan</label> <textarea id="jurnalKeterangan" rows="2" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500"></textarea>
      </div>
      <div class="flex gap-3 pt-4">
       <button type="button" onclick="closeModal()" class="flex-1 px-4 py-2.5 border border-slate-300 rounded-xl text-slate-700 hover:bg-slate-50 transition">Batal</button> <button type="submit" id="btnSaveJurnal" class="flex-1 px-4 py-2.5 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition">Simpan</button>
      </div>
     </form>
    </div><!-- Modal Jadwal -->
    <div id="modalJadwal" class="bg-white rounded-2xl w-full max-w-lg max-h-[90%] overflow-auto hidden">
     <div class="p-6 border-b border-slate-200">
      <h3 class="text-xl font-bold text-slate-800">Tambah Jadwal Pelajaran</h3>
     </div>
     <form id="formJadwal" class="p-6 space-y-4">
      <input type="hidden" id="jadwalId">
      <div>
       <label for="jadwalHari" class="block text-sm font-medium text-slate-700 mb-1">Hari</label> <select id="jadwalHari" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Hari</option> <option value="Senin">Senin</option> <option value="Selasa">Selasa</option> <option value="Rabu">Rabu</option> <option value="Kamis">Kamis</option> <option value="Jumat">Jumat</option> <option value="Sabtu">Sabtu</option> </select>
      </div>
      <div>
       <label for="jadwalJam" class="block text-sm font-medium text-slate-700 mb-1">Jam</label> <select id="jadwalJam" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Jam</option> <option value="07:00 - 07:45">07:00 - 07:45</option> <option value="07:45 - 08:30">07:45 - 08:30</option> <option value="08:30 - 09:15">08:30 - 09:15</option> <option value="09:30 - 10:15">09:30 - 10:15</option> <option value="10:15 - 11:00">10:15 - 11:00</option> <option value="11:00 - 11:45">11:00 - 11:45</option> <option value="12:30 - 13:15">12:30 - 13:15</option> <option value="13:15 - 14:00">13:15 - 14:00</option> </select>
      </div>
      <div>
       <label for="jadwalKelas" class="block text-sm font-medium text-slate-700 mb-1">Kelas</label> <select id="jadwalKelas" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Kelas</option> <option value="X-A">X-A</option> <option value="X-B">X-B</option> <option value="XI-A">XI-A</option> <option value="XI-B">XI-B</option> <option value="XII-A">XII-A</option> <option value="XII-B">XII-B</option> </select>
      </div>
      <div>
       <label for="jadwalMapel" class="block text-sm font-medium text-slate-700 mb-1">Mata Pelajaran</label> <select id="jadwalMapel" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Mata Pelajaran</option> <option value="Matematika">Matematika</option> <option value="Bahasa Indonesia">Bahasa Indonesia</option> <option value="Bahasa Inggris">Bahasa Inggris</option> <option value="Fisika">Fisika</option> <option value="Kimia">Kimia</option> <option value="Biologi">Biologi</option> <option value="Sejarah">Sejarah</option> <option value="Geografi">Geografi</option> <option value="Ekonomi">Ekonomi</option> <option value="PKN">PKN</option> <option value="Penjaskes">Penjaskes</option> <option value="Seni Budaya">Seni Budaya</option> </select>
      </div>
      <div>
       <label for="jadwalGuru" class="block text-sm font-medium text-slate-700 mb-1">Guru</label> <select id="jadwalGuru" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Guru</option> </select>
      </div>
      <div class="flex gap-3 pt-4">
       <button type="button" onclick="closeModal()" class="flex-1 px-4 py-2.5 border border-slate-300 rounded-xl text-slate-700 hover:bg-slate-50 transition">Batal</button> <button type="submit" id="btnSaveJadwal" class="flex-1 px-4 py-2.5 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition">Simpan</button>
      </div>
     </form>
    </div><!-- Modal Dokumentasi -->
    <div id="modalDokumentasi" class="bg-white rounded-2xl w-full max-w-lg max-h-[90%] overflow-auto hidden">
     <div class="p-6 border-b border-slate-200">
      <h3 class="text-xl font-bold text-slate-800">Tambah Dokumen</h3>
     </div>
     <form id="formDokumentasi" class="p-6 space-y-4">
      <input type="hidden" id="dokumentasiId">
      <div>
       <label for="dokumentasiNamaDokumen" class="block text-sm font-medium text-slate-700 mb-1">Nama Dokumen</label> <input type="text" id="dokumentasiNamaDokumen" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" placeholder="cth: Surat Edaran Kepala Sekolah" required>
      </div>
      <div>
       <label for="dokumentasiKategori" class="block text-sm font-medium text-slate-700 mb-1">Kategori</label> <select id="dokumentasiKategori" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Kategori</option> <option value="Surat Edaran">Surat Edaran</option> <option value="SK Kepala Sekolah">SK Kepala Sekolah</option> <option value="Rencana Kerja">Rencana Kerja</option> <option value="Panduan/Pedoman">Panduan/Pedoman</option> <option value="Hasil Evaluasi">Hasil Evaluasi</option> <option value="Program Tahunan">Program Tahunan</option> <option value="KTSP">KTSP</option> <option value="Dokumen Siswa">Dokumen Siswa</option> <option value="Dokumen Guru">Dokumen Guru</option> <option value="Lainnya">Lainnya</option> </select>
      </div>
      <div>
       <label for="dokumentasiJenis" class="block text-sm font-medium text-slate-700 mb-1">Jenis Dokumen</label> <select id="dokumentasiJenis" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" required> <option value="">Pilih Jenis</option> <option value="PDF">PDF</option> <option value="Word">Word</option> <option value="Excel">Excel</option> <option value="Gambar">Gambar</option> <option value="Video">Video</option> <option value="Audio">Audio</option> <option value="Teks">Teks</option> </select>
      </div>
      <div>
       <label for="dokumentasiTahun" class="block text-sm font-medium text-slate-700 mb-1">Tahun</label> <input type="number" id="dokumentasiTahun" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" placeholder="2024" min="2000" max="2100" required>
      </div>
      <div>
       <label for="dokumentasiDeskripsi" class="block text-sm font-medium text-slate-700 mb-1">Deskripsi</label> <textarea id="dokumentasiDeskripsi" rows="3" class="w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500" placeholder="Deskripsi singkat tentang dokumen..."></textarea>
      </div>
      <div class="flex gap-3 pt-4">
       <button type="button" onclick="closeModal()" class="flex-1 px-4 py-2.5 border border-slate-300 rounded-xl text-slate-700 hover:bg-slate-50 transition">Batal</button> <button type="submit" id="btnSaveDokumentasi" class="flex-1 px-4 py-2.5 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition">Simpan</button>
      </div>
     </form>
    </div><!-- Delete Confirmation Modal -->
    <div id="modalDelete" class="bg-white rounded-2xl w-full max-w-sm hidden">
     <div class="p-6 text-center">
      <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
       <svg class="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
       </svg>
      </div>
      <h3 class="text-lg font-bold text-slate-800 mb-2">Hapus Data?</h3>
      <p class="text-slate-500 mb-6">Data yang dihapus tidak dapat dikembalikan.</p>
      <div class="flex gap-3">
       <button onclick="closeModal()" class="flex-1 px-4 py-2.5 border border-slate-300 rounded-xl text-slate-700 hover:bg-slate-50 transition">Batal</button> <button id="btnConfirmDelete" class="flex-1 px-4 py-2.5 bg-red-500 text-white rounded-xl hover:bg-red-600 transition">Hapus</button>
      </div>
     </div>
    </div>
   </div><!-- Toast Notification -->
   <div id="toast" class="fixed bottom-4 right-4 bg-slate-800 text-white px-5 py-3 rounded-xl shadow-lg hidden z-50 flex items-center gap-3">
    <svg id="toastIcon" class="w-5 h-5 text-emerald-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
    </svg><span id="toastMessage">Berhasil!</span>
   </div>
  </div>
  <script>
    let allData = [];
    let currentSection = 'beranda';
    let deleteTarget = null;
    let isLoggedIn = false;

    const defaultConfig = {
      school_name: 'MIS DARUL HIKMAH BINDANG',
      welcome_text: 'Sistem Administrasi Sekolah'
    };

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (config) => {
          const schoolName = config.school_name || defaultConfig.school_name;
          const welcomeText = config.welcome_text || defaultConfig.welcome_text;
          
          document.getElementById('loginSchoolName').textContent = schoolName;
          document.getElementById('loginWelcomeText').textContent = welcomeText;
          document.getElementById('sidebarSchoolName').textContent = schoolName.split(' ').slice(0, 3).join(' ');
        },
        mapToCapabilities: (config) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ['school_name', config.school_name || defaultConfig.school_name],
          ['welcome_text', config.welcome_text || defaultConfig.welcome_text]
        ])
      });
    }

    const dataHandler = {
      onDataChanged(data) {
        allData = data;
        updateDashboard();
        renderSiswaTable();
        renderGuruTable();
        renderPrestasiTable();
        renderJurnalTable();
        renderJadwalTable();
        renderDokumentasiTable();
        updateDropdowns();
      }
    };

    async function initDataSdk() {
      if (window.dataSdk) {
        const result = await window.dataSdk.init(dataHandler);
        if (!result.isOk) {
          console.error('Failed to initialize Data SDK');
        }
      }
    }

    initDataSdk();

    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      
      if (username === 'admin' && password === 'admin') {
        isLoggedIn = true;
        document.getElementById('loginPage').classList.add('hidden');
        document.getElementById('dashboard').classList.remove('hidden');
        document.getElementById('loginError').classList.add('hidden');
      } else {
        document.getElementById('loginError').classList.remove('hidden');
      }
    });

    function logout() {
      isLoggedIn = false;
      document.getElementById('dashboard').classList.add('hidden');
      document.getElementById('loginPage').classList.remove('hidden');
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
    }

    function showSection(section) {
      currentSection = section;
      
      document.querySelectorAll('main > section').forEach(s => s.classList.add('hidden'));
      
      const sectionId = 'section' + section.charAt(0).toUpperCase() + section.slice(1);
      document.getElementById(sectionId).classList.remove('hidden');
      
      document.querySelectorAll('[data-section]').forEach(btn => {
        btn.classList.remove('bg-emerald-600', 'text-white');
        btn.classList.add('hover:bg-slate-700', 'text-slate-300');
      });
      
      const activeBtn = document.querySelector(`[data-section="${section}"]`);
      if (activeBtn) {
        activeBtn.classList.add('bg-emerald-600', 'text-white');
        activeBtn.classList.remove('hover:bg-slate-700', 'text-slate-300');
      }
    }

    function updateDashboard() {
      const siswa = allData.filter(d => d.type === 'siswa');
      const guru = allData.filter(d => d.type === 'guru');
      const prestasi = allData.filter(d => d.type === 'prestasi');
      const jadwal = allData.filter(d => d.type === 'jadwal');
      const dokumentasi = allData.filter(d => d.type === 'dokumentasi');
      
      document.getElementById('totalSiswa').textContent = siswa.length;
      document.getElementById('totalGuru').textContent = guru.length;
      document.getElementById('totalPrestasi').textContent = prestasi.length;
      document.getElementById('totalJadwal').textContent = jadwal.length;
      document.getElementById('totalDokumen').textContent = dokumentasi.length;
      
      const recentContainer = document.getElementById('recentActivity');
      const recent = [...allData].sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)).slice(0, 5);
      
      if (recent.length > 0) {
        recentContainer.innerHTML = recent.map(item => `
          <div class="flex items-center gap-3 p-3 bg-slate-50 rounded-xl">
            <div class="w-10 h-10 rounded-full flex items-center justify-center ${getTypeColor(item.type)}">
              ${getTypeIcon(item.type)}
            </div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium text-slate-800 truncate">${item.nama || item.nama_prestasi || item.materi || item.mata_pelajaran || item.nama_dokumen || '-'}</p>
              <p class="text-xs text-slate-500">${getTypeLabel(item.type)}</p>
            </div>
          </div>
        `).join('');
      } else {
        recentContainer.innerHTML = '<p class="text-slate-400 text-sm">Belum ada aktivitas</p>';
      }
      
      const days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
      const today = days[new Date().getDay()];
      const todayJadwal = jadwal.filter(j => j.hari === today);
      
      const scheduleContainer = document.getElementById('todaySchedule');
      if (todayJadwal.length > 0) {
        scheduleContainer.innerHTML = todayJadwal.map(j => `
          <div class="flex items-center gap-3 p-3 bg-slate-50 rounded-xl">
            <div class="text-center">
              <p class="text-xs text-slate-500">${j.jam ? j.jam.split(' - ')[0] : ''}</p>
            </div>
            <div class="flex-1">
              <p class="text-sm font-medium text-slate-800">${j.mata_pelajaran || '-'}</p>
              <p class="text-xs text-slate-500">${j.kelas || ''}  ${j.guru || ''}</p>
            </div>
          </div>
        `).join('');
      } else {
        scheduleContainer.innerHTML = '<p class="text-slate-400 text-sm">Tidak ada jadwal hari ini</p>';
      }
    }

    function getTypeColor(type) {
      const colors = {
        siswa: 'bg-blue-100 text-blue-600',
        guru: 'bg-emerald-100 text-emerald-600',
        prestasi: 'bg-yellow-100 text-yellow-600',
        jurnal: 'bg-amber-100 text-amber-600',
        jadwal: 'bg-purple-100 text-purple-600',
        dokumentasi: 'bg-pink-100 text-pink-600'
      };
      return colors[type] || 'bg-slate-100 text-slate-600';
    }

    function getTypeIcon(type) {
      const icons = {
        siswa: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>',
        guru: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',
        prestasi: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m0 0h6"></path></svg>',
        jurnal: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>',
        jadwal: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>',
        dokumentasi: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>'
      };
      return icons[type] || '';
    }

    function getTypeLabel(type) {
      const labels = { siswa: 'Siswa', guru: 'Guru', prestasi: 'Prestasi', jurnal: 'Jurnal Mengajar', jadwal: 'Jadwal', dokumentasi: 'Dokumentasi' };
      return labels[type] || type;
    }

    function renderSiswaTable() {
      const siswa = allData.filter(d => d.type === 'siswa');
      const tbody = document.getElementById('siswaTableBody');
      
      if (siswa.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada data siswa</td></tr>';
        return;
      }
      
      tbody.innerHTML = siswa.map(s => `
        <tr class="hover:bg-slate-50 transition">
          <td class="px-6 py-4 text-sm font-medium text-slate-800">${s.nis || '-'}</td>
          <td class="px-6 py-4 text-sm text-slate-600">${s.nama || '-'}</td>
          <td class="px-6 py-4"><span class="px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full">${s.kelas || '-'}</span></td>
          <td class="px-6 py-4 text-sm text-slate-600">${s.alamat || '-'}</td>
          <td class="px-6 py-4 text-sm text-slate-600">${s.telepon || '-'}</td>
          <td class="px-6 py-4 text-center">
            <div class="flex items-center justify-center gap-2">
              <button onclick="editSiswa('${s.__backendId}')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
              </button>
              <button onclick="confirmDelete('${s.__backendId}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
              </button>
            </div>
          </td>
        </tr>
      `).join('');
    }

    function renderGuruTable() {
      const guru = allData.filter(d => d.type === 'guru');
      const tbody = document.getElementById('guruTableBody');
      
      if (guru.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada data guru</td></tr>';
        return;
      }
      
      tbody.innerHTML = guru.map(g => `
        <tr class="hover:bg-slate-50 transition">
          <td class="px-6 py-4 text-sm font-medium text-slate-800">${g.nip || '-'}</td>
          <td class="px-6 py-4 text-sm text-slate-600">${g.nama || '-'}</td>
          <td class="px-6 py-4"><span class="px-3 py-1 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full">${g.mata_pelajaran || '-'}</span></td>
          <td class="px-6 py-4 text-sm text-slate-600">${g.telepon || '-'}</td>
          <td class="px-6 py-4 text-sm text-slate-600">${g.alamat || '-'}</td>
          <td class="px-6 py-4 text-center">
            <div class="flex items-center justify-center gap-2">
              <button onclick="editGuru('${g.__backendId}')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
              </button>
              <button onclick="confirmDelete('${g.__backendId}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
              </button>
            </div>
          </td>
        </tr>
      `).join('');
    }

    function renderPrestasiTable() {
      const prestasi = allData.filter(d => d.type === 'prestasi');
      const tbody = document.getElementById('prestasiTableBody');
      
      if (prestasi.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada prestasi siswa</td></tr>';
        return;
      }
      
      tbody.innerHTML = prestasi.map(p => {
        const siswa = allData.find(d => d.type === 'siswa' && d.nis === p.nis);
        return `
        <tr class="hover:bg-slate-50 transition">
          <td class="px-6 py-4 text-sm font-medium text-slate-800">${p.nis || '-'}</td>
          <td class="px-6 py-4 text-sm text-slate-600">${siswa?.nama || '-'}</td>
          <td class="px-6 py-4 text-sm text-slate-600">${p.nama_prestasi || '-'}</td>
          <td class="px-6 py-4"><span class="px-3 py-1 bg-yellow-100 text-yellow-700 text-xs font-medium rounded-full">${p.tingkat || '-'}</span></td>
          <td class="px-6 py-4"><span class="px-3 py-1 bg-amber-100 text-amber-700 text-xs font-medium rounded-full">${p.penghargaan || '-'}</span></td>
          <td class="px-6 py-4 text-center">
            <div class="flex items-center justify-center gap-2">
              <button onclick="editPrestasi('${p.__backendId}')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
              </button>
              <button onclick="confirmDelete('${p.__backendId}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
              </button>
            </div>
          </td>
        </tr>
      `}).join('');
    }

    function renderJurnalTable() {
      const jurnal = allData.filter(d => d.type === 'jurnal');
      const tbody = document.getElementById('jurnalTableBody');
      
      if (jurnal.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada jurnal mengajar</td></tr>';
        return;
      }
      
      tbody.innerHTML = jurnal.map(j => `
        <tr class="hover:bg-slate-50 transition">
          <td class="px-6 py-4 text-sm font-medium text-slate-800">${formatDate(j.tanggal)}</td>
          <td class="px-6 py-4 text-sm text-slate-600">${j.guru || '-'}</td>
          <td class="px-6 py-4"><span class="px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full">${j.kelas || '-'}</span></td>
          <td class="px-6 py-4"><span class="px-3 py-1 bg-amber-100 text-amber-700 text-xs font-medium rounded-full">${j.mata_pelajaran || '-'}</span></td>
          <td class="px-6 py-4 text-sm text-slate-600 max-w-xs truncate">${j.materi || '-'}</td>
          <td class="px-6 py-4 text-center">
            <div class="flex items-center justify-center gap-2">
              <button onclick="editJurnal('${j.__backendId}')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
              </button>
              <button onclick="confirmDelete('${j.__backendId}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
              </button>
            </div>
          </td>
        </tr>
      `).join('');
    }

    function renderJadwalTable() {
      const jadwal = allData.filter(d => d.type === 'jadwal');
      const tbody = document.getElementById('jadwalTableBody');
      
      if (jadwal.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada jadwal pelajaran</td></tr>';
        return;
      }
      
      const dayOrder = ['Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
      const sortedJadwal = [...jadwal].sort((a, b) => {
        const dayDiff = dayOrder.indexOf(a.hari) - dayOrder.indexOf(b.hari);
        if (dayDiff !== 0) return dayDiff;
        return (a.jam || '').localeCompare(b.jam || '');
      });
      
      tbody.innerHTML = sortedJadwal.map(j => `
        <tr class="hover:bg-slate-50 transition">
          <td class="px-6 py-4"><span class="px-3 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full">${j.hari || '-'}</span></td>
          <td class="px-6 py-4 text-sm font-medium text-slate-800">${j.jam || '-'}</td>
          <td class="px-6 py-4"><span class="px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full">${j.kelas || '-'}</span></td>
          <td class="px-6 py-4 text-sm text-slate-600">${j.mata_pelajaran || '-'}</td>
          <td class="px-6 py-4 text-sm text-slate-600">${j.guru || '-'}</td>
          <td class="px-6 py-4 text-center">
            <div class="flex items-center justify-center gap-2">
              <button onclick="editJadwal('${j.__backendId}')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
              </button>
              <button onclick="confirmDelete('${j.__backendId}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
              </button>
            </div>
          </td>
        </tr>
      `).join('');
    }

    function renderDokumentasiTable() {
      const dokumentasi = allData.filter(d => d.type === 'dokumentasi');
      const tbody = document.getElementById('dokumentasiTableBody');
      
      if (dokumentasi.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6" class="px-6 py-8 text-center text-slate-400">Belum ada dokumen</td></tr>';
        return;
      }
      
      tbody.innerHTML = dokumentasi.map(d => `
        <tr class="hover:bg-slate-50 transition">
          <td class="px-6 py-4 text-sm font-medium text-slate-800">${d.nama_dokumen || '-'}</td>
          <td class="px-6 py-4"><span class="px-3 py-1 bg-pink-100 text-pink-700 text-xs font-medium rounded-full">${d.kategori || '-'}</span></td>
          <td class="px-6 py-4"><span class="px-3 py-1 bg-rose-100 text-rose-700 text-xs font-medium rounded-full">${d.jenis_dokumen || '-'}</span></td>
          <td class="px-6 py-4 text-sm text-slate-600">${d.tahun || '-'}</td>
          <td class="px-6 py-4 text-sm text-slate-600 max-w-xs truncate">${d.deskripsi || '-'}</td>
          <td class="px-6 py-4 text-center">
            <div class="flex items-center justify-center gap-2">
              <button onclick="editDokumentasi('${d.__backendId}')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
              </button>
              <button onclick="confirmDelete('${d.__backendId}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
              </button>
            </div>
          </td>
        </tr>
      `).join('');
    }

    function formatDate(dateStr) {
      if (!dateStr) return '-';
      const date = new Date(dateStr);
      return date.toLocaleDateString('id-ID', { day: 'numeric', month: 'short', year: 'numeric' });
    }

    function updateDropdowns() {
      const guru = allData.filter(d => d.type === 'guru');
      const siswa = allData.filter(d => d.type === 'siswa');
      const guruOptions = '<option value="">Pilih Guru</option>' + guru.map(g => `<option value="${g.nama}">${g.nama} - ${g.mata_pelajaran}</option>`).join('');
      const siswaOptions = '<option value="">Pilih Siswa</option>' + siswa.map(s => `<option value="${s.nis}">${s.nis} - ${s.nama}</option>`).join('');
      
      document.getElementById('jurnalGuru').innerHTML = guruOptions;
      document.getElementById('jadwalGuru').innerHTML = guruOptions;
      document.getElementById('prestasiNis').innerHTML = siswaOptions;
    }

    function openModal(type) {
      document.getElementById('modalOverlay').classList.remove('hidden');
      document.getElementById('modal' + type.charAt(0).toUpperCase() + type.slice(1)).classList.remove('hidden');
      
      if (type === 'siswa') {
        document.getElementById('formSiswa').reset();
        document.getElementById('siswaId').value = '';
      } else if (type === 'guru') {
        document.getElementById('formGuru').reset();
        document.getElementById('guruId').value = '';
      } else if (type === 'prestasi') {
        document.getElementById('formPrestasi').reset();
        document.getElementById('prestasiId').value = '';
      } else if (type === 'jurnal') {
        document.getElementById('formJurnal').reset();
        document.getElementById('jurnalId').value = '';
        document.getElementById('jurnalTanggal').value = new Date().toISOString().split('T')[0];
      } else if (type === 'jadwal') {
        document.getElementById('formJadwal').reset();
        document.getElementById('jadwalId').value = '';
      } else if (type === 'dokumentasi') {
        document.getElementById('formDokumentasi').reset();
        document.getElementById('dokumentasiId').value = '';
        document.getElementById('dokumentasiTahun').value = new Date().getFullYear();
      }
    }

    function closeModal() {
      document.getElementById('modalOverlay').classList.add('hidden');
      document.querySelectorAll('#modalOverlay > div').forEach(m => m.classList.add('hidden'));
      deleteTarget = null;
    }

    function editSiswa(id) {
      const siswa = allData.find(d => d.__backendId === id);
      if (!siswa) return;
      
      document.getElementById('siswaId').value = siswa.__backendId;
      document.getElementById('siswaNis').value = siswa.nis || '';
      document.getElementById('siswaNama').value = siswa.nama || '';
      document.getElementById('siswaKelas').value = siswa.kelas || '';
      document.getElementById('siswaAlamat').value = siswa.alamat || '';
      document.getElementById('siswaTelepon').value = siswa.telepon || '';
      
      document.getElementById('modalOverlay').classList.remove('hidden');
      document.getElementById('modalSiswa').classList.remove('hidden');
    }

    function editGuru(id) {
      const guru = allData.find(d => d.__backendId === id);
      if (!guru) return;
      
      document.getElementById('guruId').value = guru.__backendId;
      document.getElementById('guruNip').value = guru.nip || '';
      document.getElementById('guruNama').value = guru.nama || '';
      document.getElementById('guruMapel').value = guru.mata_pelajaran || '';
      document.getElementById('guruTelepon').value = guru.telepon || '';
      document.getElementById('guruAlamat').value = guru.alamat || '';
      
      document.getElementById('modalOverlay').classList.remove('hidden');
      document.getElementById('modalGuru').classList.remove('hidden');
    }

    function editPrestasi(id) {
      const prestasi = allData.find(d => d.__backendId === id);
      if (!prestasi) return;
      
      document.getElementById('prestasiId').value = prestasi.__backendId;
      document.getElementById('prestasiNis').value = prestasi.nis || '';
      document.getElementById('prestasiNamaPrestasi').value = prestasi.nama_prestasi || '';
      document.getElementById('prestasiTingkat').value = prestasi.tingkat || '';
      document.getElementById('prestasiPenghargaan').value = prestasi.penghargaan || '';
      
      document.getElementById('modalOverlay').classList.remove('hidden');
      document.getElementById('modalPrestasi').classList.remove('hidden');
    }

    function editJurnal(id) {
      const jurnal = allData.find(d => d.__backendId === id);
      if (!jurnal) return;
      
      document.getElementById('jurnalId').value = jurnal.__backendId;
      document.getElementById('jurnalTanggal').value = jurnal.tanggal || '';
      document.getElementById('jurnalGuru').value = jurnal.guru || '';
      document.getElementById('jurnalKelas').value = jurnal.kelas || '';
      document.getElementById('jurnalMapel').value = jurnal.mata_pelajaran || '';
      document.getElementById('jurnalMateri').value = jurnal.materi || '';
      document.getElementById('jurnalKeterangan').value = jurnal.keterangan || '';
      
      document.getElementById('modalOverlay').classList.remove('hidden');
      document.getElementById('modalJurnal').classList.remove('hidden');
    }

    function editJadwal(id) {
      const jadwal = allData.find(d => d.__backendId === id);
      if (!jadwal) return;
      
      document.getElementById('jadwalId').value = jadwal.__backendId;
      document.getElementById('jadwalHari').value = jadwal.hari || '';
      document.getElementById('jadwalJam').value = jadwal.jam || '';
      document.getElementById('jadwalKelas').value = jadwal.kelas || '';
      document.getElementById('jadwalMapel').value = jadwal.mata_pelajaran || '';
      document.getElementById('jadwalGuru').value = jadwal.guru || '';
      
      document.getElementById('modalOverlay').classList.remove('hidden');
      document.getElementById('modalJadwal').classList.remove('hidden');
    }

    function editDokumentasi(id) {
      const dokumentasi = allData.find(d => d.__backendId === id);
      if (!dokumentasi) return;
      
      document.getElementById('dokumentasiId').value = dokumentasi.__backendId;
      document.getElementById('dokumentasiNamaDokumen').value = dokumentasi.nama_dokumen || '';
      document.getElementById('dokumentasiKategori').value = dokumentasi.kategori || '';
      document.getElementById('dokumentasiJenis').value = dokumentasi.jenis_dokumen || '';
      document.getElementById('dokumentasiTahun').value = dokumentasi.tahun || '';
      document.getElementById('dokumentasiDeskripsi').value = dokumentasi.deskripsi || '';
      
      document.getElementById('modalOverlay').classList.remove('hidden');
      document.getElementById('modalDokumentasi').classList.remove('hidden');
    }

    function confirmDelete(id) {
      deleteTarget = allData.find(d => d.__backendId === id);
      if (!deleteTarget) return;
      
      document.getElementById('modalOverlay').classList.remove('hidden');
      document.getElementById('modalDelete').classList.remove('hidden');
    }

    document.getElementById('btnConfirmDelete').addEventListener('click', async function() {
      if (!deleteTarget || !window.dataSdk) return;
      
      this.classList.add('btn-loading');
      this.textContent = 'Menghapus...';
      
      const result = await window.dataSdk.delete(deleteTarget);
      
      this.classList.remove('btn-loading');
      this.textContent = 'Hapus';
      
      if (result.isOk) {
        showToast('Data berhasil dihapus', 'success');
        closeModal();
      } else {
        showToast('Gagal menghapus data', 'error');
      }
    });

    document.getElementById('formSiswa').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (!window.dataSdk) return;
      
      const btn = document.getElementById('btnSaveSiswa');
      btn.classList.add('btn-loading');
      btn.textContent = 'Menyimpan...';
      
      const id = document.getElementById('siswaId').value;
      const data = {
        type: 'siswa',
        nis: document.getElementById('siswaNis').value,
        nama: document.getElementById('siswaNama').value,
        kelas: document.getElementById('siswaKelas').value,
        alamat: document.getElementById('siswaAlamat').value,
        telepon: document.getElementById('siswaTelepon').value,
        createdAt: new Date().toISOString()
      };
      
      let result;
      if (id) {
        const existing = allData.find(d => d.__backendId === id);
        result = await window.dataSdk.update({ ...existing, ...data });
      } else {
        if (allData.length >= 999) {
          showToast('Batas maksimum 999 data tercapai', 'error');
          btn.classList.remove('btn-loading');
          btn.textContent = 'Simpan';
          return;
        }
        result = await window.dataSdk.create(data);
      }
      
      btn.classList.remove('btn-loading');
      btn.textContent = 'Simpan';
      
      if (result.isOk) {
        showToast('Data siswa berhasil disimpan', 'success');
        closeModal();
      } else {
        showToast('Gagal menyimpan data', 'error');
      }
    });

    document.getElementById('formGuru').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (!window.dataSdk) return;
      
      const btn = document.getElementById('btnSaveGuru');
      btn.classList.add('btn-loading');
      btn.textContent = 'Menyimpan...';
      
      const id = document.getElementById('guruId').value;
      const data = {
        type: 'guru',
        nip: document.getElementById('guruNip').value,
        nama: document.getElementById('guruNama').value,
        mata_pelajaran: document.getElementById('guruMapel').value,
        telepon: document.getElementById('guruTelepon').value,
        alamat: document.getElementById('guruAlamat').value,
        createdAt: new Date().toISOString()
      };
      
      let result;
      if (id) {
        const existing = allData.find(d => d.__backendId === id);
        result = await window.dataSdk.update({ ...existing, ...data });
      } else {
        if (allData.length >= 999) {
          showToast('Batas maksimum 999 data tercapai', 'error');
          btn.classList.remove('btn-loading');
          btn.textContent = 'Simpan';
          return;
        }
        result = await window.dataSdk.create(data);
      }
      
      btn.classList.remove('btn-loading');
      btn.textContent = 'Simpan';
      
      if (result.isOk) {
        showToast('Data guru berhasil disimpan', 'success');
        closeModal();
      } else {
        showToast('Gagal menyimpan data', 'error');
      }
    });

    document.getElementById('formPrestasi').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (!window.dataSdk) return;
      
      const btn = document.getElementById('btnSavePrestasi');
      btn.classList.add('btn-loading');
      btn.textContent = 'Menyimpan...';
      
      const id = document.getElementById('prestasiId').value;
      const data = {
        type: 'prestasi',
        nis: document.getElementById('prestasiNis').value,
        nama_prestasi: document.getElementById('prestasiNamaPrestasi').value,
        tingkat: document.getElementById('prestasiTingkat').value,
        penghargaan: document.getElementById('prestasiPenghargaan').value,
        createdAt: new Date().toISOString()
      };
      
      let result;
      if (id) {
        const existing = allData.find(d => d.__backendId === id);
        result = await window.dataSdk.update({ ...existing, ...data });
      } else {
        if (allData.length >= 999) {
          showToast('Batas maksimum 999 data tercapai', 'error');
          btn.classList.remove('btn-loading');
          btn.textContent = 'Simpan';
          return;
        }
        result = await window.dataSdk.create(data);
      }
      
      btn.classList.remove('btn-loading');
      btn.textContent = 'Simpan';
      
      if (result.isOk) {
        showToast('Prestasi siswa berhasil disimpan', 'success');
        closeModal();
      } else {
        showToast('Gagal menyimpan prestasi', 'error');
      }
    });

    document.getElementById('formJurnal').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (!window.dataSdk) return;
      
      const btn = document.getElementById('btnSaveJurnal');
      btn.classList.add('btn-loading');
      btn.textContent = 'Menyimpan...';
      
      const id = document.getElementById('jurnalId').value;
      const data = {
        type: 'jurnal',
        tanggal: document.getElementById('jurnalTanggal').value,
        guru: document.getElementById('jurnalGuru').value,
        kelas: document.getElementById('jurnalKelas').value,
        mata_pelajaran: document.getElementById('jurnalMapel').value,
        materi: document.getElementById('jurnalMateri').value,
        keterangan: document.getElementById('jurnalKeterangan').value,
        createdAt: new Date().toISOString()
      };
      
      let result;
      if (id) {
        const existing = allData.find(d => d.__backendId === id);
        result = await window.dataSdk.update({ ...existing, ...data });
      } else {
        if (allData.length >= 999) {
          showToast('Batas maksimum 999 data tercapai', 'error');
          btn.classList.remove('btn-loading');
          btn.textContent = 'Simpan';
          return;
        }
        result = await window.dataSdk.create(data);
      }
      
      btn.classList.remove('btn-loading');
      btn.textContent = 'Simpan';
      
      if (result.isOk) {
        showToast('Jurnal berhasil disimpan', 'success');
        closeModal();
      } else {
        showToast('Gagal menyimpan jurnal', 'error');
      }
    });

    document.getElementById('formJadwal').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (!window.dataSdk) return;
      
      const btn = document.getElementById('btnSaveJadwal');
      btn.classList.add('btn-loading');
      btn.textContent = 'Menyimpan...';
      
      const id = document.getElementById('jadwalId').value;
      const data = {
        type: 'jadwal',
        hari: document.getElementById('jadwalHari').value,
        jam: document.getElementById('jadwalJam').value,
        kelas: document.getElementById('jadwalKelas').value,
        mata_pelajaran: document.getElementById('jadwalMapel').value,
        guru: document.getElementById('jadwalGuru').value,
        createdAt: new Date().toISOString()
      };
      
      let result;
      if (id) {
        const existing = allData.find(d => d.__backendId === id);
        result = await window.dataSdk.update({ ...existing, ...data });
      } else {
        if (allData.length >= 999) {
          showToast('Batas maksimum 999 data tercapai', 'error');
          btn.classList.remove('btn-loading');
          btn.textContent = 'Simpan';
          return;
        }
        result = await window.dataSdk.create(data);
      }
      
      btn.classList.remove('btn-loading');
      btn.textContent = 'Simpan';
      
      if (result.isOk) {
        showToast('Jadwal berhasil disimpan', 'success');
        closeModal();
      } else {
        showToast('Gagal menyimpan jadwal', 'error');
      }
    });

    document.getElementById('formDokumentasi').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (!window.dataSdk) return;
      
      const btn = document.getElementById('btnSaveDokumentasi');
      btn.classList.add('btn-loading');
      btn.textContent = 'Menyimpan...';
      
      const id = document.getElementById('dokumentasiId').value;
      const data = {
        type: 'dokumentasi',
        nama_dokumen: document.getElementById('dokumentasiNamaDokumen').value,
        kategori: document.getElementById('dokumentasiKategori').value,
        jenis_dokumen: document.getElementById('dokumentasiJenis').value,
        tahun: document.getElementById('dokumentasiTahun').value,
        deskripsi: document.getElementById('dokumentasiDeskripsi').value,
        createdAt: new Date().toISOString()
      };
      
      let result;
      if (id) {
        const existing = allData.find(d => d.__backendId === id);
        result = await window.dataSdk.update({ ...existing, ...data });
      } else {
        if (allData.length >= 999) {
          showToast('Batas maksimum 999 data tercapai', 'error');
          btn.classList.remove('btn-loading');
          btn.textContent = 'Simpan';
          return;
        }
        result = await window.dataSdk.create(data);
      }
      
      btn.classList.remove('btn-loading');
      btn.textContent = 'Simpan';
      
      if (result.isOk) {
        showToast('Dokumen berhasil disimpan', 'success');
        closeModal();
      } else {
        showToast('Gagal menyimpan dokumen', 'error');
      }
    });

    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toastMessage');
      const toastIcon = document.getElementById('toastIcon');
      
      toastMessage.textContent = message;
      
      if (type === 'success') {
        toastIcon.classList.remove('text-red-400');
        toastIcon.classList.add('text-emerald-400');
        toastIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>';
      } else {
        toastIcon.classList.remove('text-emerald-400');
        toastIcon.classList.add('text-red-400');
        toastIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>';
      }
      
      toast.classList.remove('hidden');
      setTimeout(() => toast.classList.add('hidden'), 3000);
    }

    document.getElementById('modalOverlay').addEventListener('click', function(e) {
      if (e.target === this) closeModal();
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cec247894aa2df9',t:'MTc3MTIzNTQ0NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>